# LifeGame - ç”Ÿå‘½ã®é€ƒé¿è¡Œ ğŸ¢ğŸ’¨ğŸŠ

ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘è¨­è¨ˆã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’é©ç”¨ã—ãŸç‰ˆã€‚
ã‚²ãƒ¼ãƒ åã‚‚ç‰¹å®šã®ç™»å ´ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä¾å­˜ã§ã¯ãªãã€ã‚²ãƒ¼ãƒ ãŒæä¾›ã™ã‚‹ãƒ†ãƒ¼ãƒã«åŸºã¥ã„ã¦å‘½åã—ãªãŠã—ã¦ã„ã¾ã™ã€‚

## ã‚²ãƒ¼ãƒ æ¦‚è¦

ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ (ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ) æ¯ã«ç‰¹æ€§ã‚’å®šç¾©ã—ã€ãã‚Œãã‚Œã®ç‰¹æ€§ã«å¾“ã£ã¦è¡Œå‹•ã—ã¾ã™ã€‚
ã‚«ãƒ¡(ğŸ¢)ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã§å‹•ãã‚’å¤–ã‹ã‚‰æ“ä½œã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
ãƒ¯ãƒ‹(ğŸŠ)ã«æ•ã¾ã£ãŸã‚‰æ•é£Ÿã•ã‚Œã¦ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã§ã™ã€‚

### æ“ä½œæ–¹æ³•

| ã‚­ãƒ¼ | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |
|------|----------|
| W / â†‘ | ä¸Šã«ç§»å‹• |
| S / â†“ | ä¸‹ã«ç§»å‹• |
| A / â† | å·¦ã«ç§»å‹• |
| D / â†’ | å³ã«ç§»å‹• |
| Q / Esc | ã‚²ãƒ¼ãƒ çµ‚äº† |

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«åŸºã¥ã„ãŸ5å±¤æ§‹é€ ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Presentation Layer                    â”‚
â”‚  UI/æç”»ã‚’æ‹…å½“                                            â”‚
â”‚  â””â”€â”€ Console/ConsoleGameRenderer.cs                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Application Layer                     â”‚
â”‚  ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãƒ»ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ‹…å½“                         â”‚
â”‚  â”œâ”€â”€ Interfaces/                                         â”‚
â”‚  â”‚   â”œâ”€â”€ IGameRenderer.cs                                â”‚
â”‚  â”‚   â”œâ”€â”€ IInputHandler.cs                                â”‚
â”‚  â”‚   â””â”€â”€ IGameClock.cs                                   â”‚
â”‚  â””â”€â”€ Services/                                           â”‚
â”‚      â”œâ”€â”€ GameLoopService.cs                              â”‚
â”‚      â””â”€â”€ GameFactory.cs                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      Domain Layer                        â”‚
â”‚  ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãƒ»ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’æ‹…å½“                       â”‚
â”‚  â”œâ”€â”€ Entities/                                           â”‚
â”‚  â”‚   â”œâ”€â”€ Entity.cs (åŸºåº•ã‚¯ãƒ©ã‚¹)                           â”‚
â”‚  â”‚   â”œâ”€â”€ Player.cs (ã‚«ãƒ¡)                                â”‚
â”‚  â”‚   â””â”€â”€ Enemy.cs (ãƒ¯ãƒ‹)                                 â”‚
â”‚  â”œâ”€â”€ Behaviors/                                          â”‚
â”‚  â”‚   â”œâ”€â”€ IMovementBehavior.cs                            â”‚
â”‚  â”‚   â”œâ”€â”€ RandomMovementBehavior.cs                       â”‚
â”‚  â”‚   â””â”€â”€ ChaseMovementBehavior.cs                        â”‚
â”‚  â”œâ”€â”€ Events/                                             â”‚
â”‚  â”‚   â””â”€â”€ GameEvents.cs                                   â”‚
â”‚  â””â”€â”€ GameState.cs                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Infrastructure Layer                  â”‚
â”‚  å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ ã¨ã®æ¥ç¶šã‚’æ‹…å½“                                â”‚
â”‚  â”œâ”€â”€ Input/ConsoleInputHandler.cs                        â”‚
â”‚  â””â”€â”€ Timing/SystemGameClock.cs                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       Core Layer                         â”‚
â”‚  å…±é€šã®å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ»è¨­å®šã‚’æ‹…å½“                          â”‚
â”‚  â”œâ”€â”€ Position.cs                                         â”‚
â”‚  â”œâ”€â”€ Direction.cs                                        â”‚
â”‚  â”œâ”€â”€ Bounds.cs                                           â”‚
â”‚  â””â”€â”€ GameSettings.cs                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## é©ç”¨ã•ã‚ŒãŸãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³

| ãƒ‘ã‚¿ãƒ¼ãƒ³ | èª¬æ˜ | é©ç”¨ç®‡æ‰€ |
|---------|------|---------|
| **ä¾å­˜æ€§æ³¨å…¥ (DI)** | ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’é€šã˜ãŸä¾å­˜æ€§ã®æ³¨å…¥ | å…¨ã‚¯ãƒ©ã‚¹ |
| **ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³** | ç§»å‹•è¡Œå‹•ã®äº¤æ›å¯èƒ½ãªå®Ÿè£… | `IMovementBehavior` |
| **ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ‘ã‚¿ãƒ¼ãƒ³** | ã‚²ãƒ¼ãƒ ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ç”Ÿæˆ | `GameFactory` |
| **ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³** | ã‚¤ãƒ™ãƒ³ãƒˆã«ã‚ˆã‚‹çŠ¶æ…‹å¤‰æ›´é€šçŸ¥ | `GameState` |
| **ãƒ“ãƒ«ãƒ€ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³** | è¤‡é›‘ãªè¨­å®šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ§‹ç¯‰ | `GameSettings.Builder` |
| **å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³** | ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªä½ç½®ãƒ»å¢ƒç•Œ | `Position`, `Bounds` |
| **ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³** | è¤‡é›‘ã•ã®éš è”½ | `GameLoopService`, `LifeGame` |
| **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³** | å…±é€šã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®éª¨æ ¼å®šç¾© | `Entity` |

## SOLIDåŸå‰‡ã®é©ç”¨

### å˜ä¸€è²¬ä»»ã®åŸå‰‡ (SRP)

å„ã‚¯ãƒ©ã‚¹ãŒä¸€ã¤ã®è²¬ä»»ã®ã¿ã‚’æŒã¤ã‚ˆã†è¨­è¨ˆ

- `Player`: ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ç§»å‹•ã®ã¿
- `Enemy`: æ•µã®è¿½è·¡ãƒ­ã‚¸ãƒƒã‚¯ã®ã¿
- `ConsoleGameRenderer`: ç”»é¢æç”»ã®ã¿

### é–‹æ”¾/é–‰é–åŸå‰‡ (OCP)

æ–°ã—ã„ç§»å‹•è¡Œå‹•ã®è¿½åŠ ãŒå®¹æ˜“

```csharp
// æ–°ã—ã„ç§»å‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¿½åŠ 
public class ZigzagMovementBehavior : IMovementBehavior
{
    public Direction DetermineDirection(Position current, Position target) => ...
}
```

### ãƒªã‚¹ã‚³ãƒ•ã®ç½®æ›åŸå‰‡ (LSP)

`Entity`ã®æ´¾ç”Ÿã‚¯ãƒ©ã‚¹(`Player`, `Enemy`)ãŒåŸºåº•ã‚¯ãƒ©ã‚¹ã¨ã—ã¦æ‰±ãˆã‚‹

### ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹åˆ†é›¢ã®åŸå‰‡ (ISP)

æœ€å°é™ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©

- `IGameRenderer`: æç”»æ©Ÿèƒ½ã®ã¿
- `IInputHandler`: å…¥åŠ›å‡¦ç†ã®ã¿
- `IGameClock`: æ™‚é–“åˆ¶å¾¡ã®ã¿

### ä¾å­˜æ€§é€†è»¢ã®åŸå‰‡ (DIP)

é«˜ãƒ¬ãƒ™ãƒ«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒæŠ½è±¡ï¼ˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰ã«ä¾å­˜

## ä½¿ç”¨ä¾‹

### åŸºæœ¬çš„ãªä½¿ç”¨

```csharp
var game = new LifeGame();
game.Run();
```

### ã‚«ã‚¹ã‚¿ãƒ è¨­å®š

```csharp
var settings = GameSettings.CreateBuilder()
    .WithBoardSize(40, 40)
    .WithPlayerPosition(new Position(30, 20))
    .WithEnemyPosition(new Position(5, 20))
    .WithUpdateInterval(150)
    .Build();

var game = new LifeGame(settings);
game.Run();
```

### å®Œå…¨ãªä¾å­˜æ€§æ³¨å…¥ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰

```csharp
var settings = GameSettings.Default();
var mockRenderer = new MockGameRenderer();
var mockInput = new MockInputHandler();
var mockClock = new MockGameClock();

var game = new LifeGame(settings, mockRenderer, mockInput, mockClock);
game.Run();
```

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
Section04_ObjectOrientedProgramming/
â”œâ”€â”€ Core/                          # å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ»åŸºæœ¬å‹
â”‚   â”œâ”€â”€ Position.cs
â”‚   â”œâ”€â”€ Direction.cs
â”‚   â”œâ”€â”€ Bounds.cs
â”‚   â””â”€â”€ GameSettings.cs
â”œâ”€â”€ Domain/                        # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ Entities/
â”‚   â”‚   â”œâ”€â”€ Entity.cs
â”‚   â”‚   â”œâ”€â”€ Player.cs
â”‚   â”‚   â””â”€â”€ Enemy.cs
â”‚   â”œâ”€â”€ Behaviors/
â”‚   â”‚   â”œâ”€â”€ IMovementBehavior.cs
â”‚   â”‚   â”œâ”€â”€ RandomMovementBehavior.cs
â”‚   â”‚   â””â”€â”€ ChaseMovementBehavior.cs
â”‚   â”œâ”€â”€ Events/
â”‚   â”‚   â””â”€â”€ GameEvents.cs
â”‚   â””â”€â”€ GameState.cs
â”œâ”€â”€ Application/                   # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”œâ”€â”€ Interfaces/
â”‚   â”‚   â”œâ”€â”€ IGameRenderer.cs
â”‚   â”‚   â”œâ”€â”€ IInputHandler.cs
â”‚   â”‚   â””â”€â”€ IGameClock.cs
â”‚   â””â”€â”€ Services/
â”‚       â”œâ”€â”€ GameLoopService.cs
â”‚       â””â”€â”€ GameFactory.cs
â”œâ”€â”€ Infrastructure/                # å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ é€£æº
â”‚   â”œâ”€â”€ Input/
â”‚   â”‚   â””â”€â”€ ConsoleInputHandler.cs
â”‚   â””â”€â”€ Timing/
â”‚       â””â”€â”€ SystemGameClock.cs
â”œâ”€â”€ Presentation/                  # UIå±¤
â”‚   â””â”€â”€ Console/
â”‚       â””â”€â”€ ConsoleGameRenderer.cs
â”œâ”€â”€ LifeGame.cs                    # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â””â”€â”€ README.md                      # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```
